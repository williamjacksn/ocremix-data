{
  "env": {
    "description": "This workflow (.github/workflows/update.yaml) was generated from ci/gen.py"
  },
  "jobs": {
    "update-remix-info": {
      "name": "Update ReMix info",
      "permissions": {
        "actions": "write",
        "contents": "write"
      },
      "runs-on": "ubuntu-latest",
      "steps": [
        {
          "name": "Check out repository",
          "uses": "actions/checkout@v5"
        },
        {
          "name": "Install uv",
          "run": "sh ci/install-uv.sh"
        },
        {
          "if": "github.event_name == 'schedule'",
          "name": "Update ReMix info (on schedule)",
          "run": "uv run ocremixdata.py update"
        },
        {
          "if": "github.event_name == 'workflow_dispatch'",
          "name": "Update ReMix info (on workflow_dispatch)",
          "run": "uv run ocremixdata.py update --limit ${{ inputs.limit }}"
        },
        {
          "env": {
            "COMMIT_MESSAGE": "Update ReMix info"
          },
          "id": "commit",
          "name": "Commit and push if changes",
          "run": "sh ci/commit-and-push.sh"
        },
        {
          "env": {
            "GH_TOKEN": "${{ github.token }}"
          },
          "if": "steps.commit.outputs.pushed == 'true'",
          "name": "Dispatch workflow to build pages",
          "run": "gh workflow run github-pages.yaml"
        }
      ]
    }
  },
  "name": "Update ReMix info",
  "on": {
    "schedule": [
      {
        "cron": "30 * * * *"
      }
    ],
    "workflow_dispatch": {
      "inputs": {
        "limit": {
          "default": 10,
          "description": "Number of ReMixes to update",
          "required": true,
          "type": "number"
        }
      }
    }
  }
}